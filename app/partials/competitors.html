<div ng-controller="AjkcListCtrl">

    <a href="" ng-click="toggleExpanded()">
        <div ng-switch on="expanded">
            <div ng-switch-when="true"><i class="icon-minus"></i>Contract Columns</div>
            <div ng-switch-when="false"><i class="icon-plus"></i>Expand Columns</div>
        </div>
    </a>

    <table class="table table-striped table-hover" >
        <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Grade</th>
                <th>Age</th>
                <th ng-show="expanded">
                    Entries
                </th>
                <th>Occupation</th>
                <th>Prefecture</th>
                <th>Selected</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="entry in entries">
                <td ng-show="!entry.selected">{{entry.competitor_number}}</td>
                <td ng-show="!entry.selected">{{entry.name}}</td>
                <td ng-show="!entry.selected">{{entry.grade}}</td>
                <td ng-show="!entry.selected">{{entry.age}}</td>
                <td ng-show="expanded && !entry.selected">
                        {{entry.entryCount}}
                </td>
                <td ng-show="!entry.selected">{{entry.occupation}}</td>
                <td ng-show="!entry.selected">{{entry.prefecture}}</td>
                <td colspan=7 ng-show="entry.selected">
                    <form ng-submit="toggleSelected($index,false)">
                        <input type="text" ng-model="entry.name">
                        <input type="text" ng-model="entry.grade">
                        <input type="text" ng-model="entry.occupation">
                        <select ng-model="entry.prefecture" ng-options="p.name for p in prefectures">
                        </select>
                        <input class="btn" type="submit" value="Close">
                    </form>
                </td>
                <td>
                    <div ng-switch on="entry.selected">
                        <div ng-switch-when="true">
                            <i class="icon-minus" ng-click="toggleSelected($index,false)"></i>
                        </div>
                        <div ng-switch-default>
                            <i class="icon-plus" ng-click="toggleSelected($index,true)"></i>
                        </div>
                    </div>
                </td>

            </tr>
        </tbody>
    </table>

</div>